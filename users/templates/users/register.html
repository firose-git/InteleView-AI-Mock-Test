{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Register | InteleView AI</title>
  <link href="{% static 'users/css/register.css' %}" rel="stylesheet" />
</head>
<body>
  <div class="register-container">
    <h1 class="register-title">Create your InteleView AI Account</h1>
    
    <form method="POST" action="{% url 'users:register' %}" onsubmit="return validateRegisterForm()">
      {% csrf_token %}

      <!-- üîî Show messages (like OTP errors) -->
      {% if messages %}
  {% for message in messages %}
    {% if message.tags == 'error' %}
      <div class="alert alert-danger" style="margin-bottom: 15px; color: red; font-weight: bold;">
        {{ message }}
      </div>
    {% endif %}
  {% endfor %}
{% endif %}


      <div class="form-group">
        <label for="full_name">Full Name</label>
        <input type="text" name="full_name" class="input-name" required />
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" name="email" class="input-email" required />
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <div class="password-wrapper">
          <input type="password" name="password" id="regPassword" class="input-password" required />
          <span class="toggle-eye" onclick="toggleRegisterPassword()">üëÅ</span>
        </div>
      </div>

      <div class="form-group">
        <label for="confirm_password">Confirm Password</label>
        <input type="password" name="confirm_password" class="input-confirm-password" required />
      </div>

      <div class="form-group">
        <label for="user_type">User Type</label>
        <select name="user_type" class="input-user-type" id="userType" onchange="toggleDepartmentField()" required>
          <option value="">Select Type</option>
          <option value="student">Student</option>
          <option value="professional">Professional</option>
          <!-- <option value="trial">Trial User</option> -->
        </select>
      </div>

      <!-- Department dropdown for students only -->
      <div class="form-group" id="departmentField" style="display: none;">
        <label for="department">Department</label>
        <select name="department" class="input-department">
          <option value="">Select Department</option>
          <option value="IT">IT</option>
          <option value="Non-IT">Non-IT</option>
        </select>
      </div>

      <button type="submit" class="btn-register">Register</button>
      <p class="login-link">Already have an account? <a href="{% url 'users:user_login' %}">Login here</a></p>
    </form>
  </div>

  <script>
    function toggleRegisterPassword() {
      const pwField = document.getElementById('regPassword');
      pwField.type = pwField.type === 'password' ? 'text' : 'password';
    }

    function toggleDepartmentField() {
      const userType = document.getElementById('userType').value;
      const deptField = document.getElementById('departmentField');
      deptField.style.display = userType === 'student' ? 'block' : 'none';
    }
  </script>

  <script src="{% static 'users/js/register.js' %}"></script>
</body>
</html>
