{% extends 'chatbot/base.html' %}
{% load static %}

<!-- âœ… Title block (DO NOT duplicate this in same file) -->
<title>{{ page_title|default:"Dashboard | InteleView AI" }}</title>


{% block head %}
<!-- Bootstrap and Font Awesome -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
<link rel="icon" type="image/png" href="{% static 'images/inteleview.png' %}">

<!-- Your dashboard-specific CSS -->
<link href="{% static 'dashboard/css/dashboard.css' %}" rel="stylesheet" />

<!-- Scoped chatbot override for dashboard -->
<style>
  #chatbot-icon {
    bottom: 100px !important;
    right: 40px !important;
    z-index: 9999;
  }

  #chatbot-box {
    position: fixed;
    bottom: 160px !important;
    /* ðŸ‘ˆ this pushes it above the icon */
    right: 40px !important;
    z-index: 9998;
  }
</style>

{% endblock %}


{% block content %}
<!-- Top Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-gradient-primary fixed-top">
  <div class="container-fluid">
    <div class="navbar-brand d-flex align-items-center">
      <i class="fas fa-brain me-2"></i>
      <span class="brand-text">InteleView AI</span>
    </div>
    <div class="navbar-nav ms-auto d-flex flex-row align-items-center">
      <div class="nav-item dropdown me-3">
        <a class="nav-link dropdown-toggle user-dropdown" href="#" role="button" data-bs-toggle="dropdown">
          <i class="fas fa-user-circle me-2"></i>
          <span class="user-name">{{ request.user.first_name|default:"User" }}</span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" href="{% url 'users:profile' %}"><i class="fas fa-user me-2"></i>Profile</a></li>
          <li><a class="dropdown-item" href="{% url 'users:settings' %}"><i class="fas fa-cog me-2"></i>Settings</a>
          </li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item" href="{% url 'users:user_logout' %}"><i
                class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
        </ul>
      </div>
    </div>
  </div>
</nav>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <div class="sidebar-brand">
      <i class="fas fa-graduation-cap"></i>
      <span>Dashboard</span>
    </div>
    <button class="sidebar-toggle d-lg-none" id="sidebarToggle">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <div class="sidebar-menu">
    <div class="menu-section">
      <h6 class="menu-title">Navigation</h6>
      <ul class="menu-list">
        {% if user.user_type == 'student' %}
        <li class="menu-item">
          <a href="{% url 'dashboard:student' %}" class="menu-link">
            <i class="fas fa-user-graduate"></i><span>Student Dashboard</span>
          </a>
        </li>
        {% elif user.user_type == 'professional' %}
        <li class="menu-item">
          <a href="{% url 'dashboard:professional' %}" class="menu-link">
            <i class="fas fa-briefcase"></i><span>Professional Dashboard</span>
          </a>
        </li>
        <!-- {% elif user.user_type == 'trial' %}
        <li class="menu-item">
          <a href="{% url 'dashboard:trial' %}" class="menu-link">
            <i class="fas fa-play-circle"></i><span>Trial Dashboard</span>
          </a>
        </li> -->
        {% endif %}
      </ul>
    </div>
  </div>

</div>

<!-- Main Content -->
<div class="main-content">
  <div class="content-wrapper">
    
    <!-- Page Header -->
    <div class="page-header d-flex justify-content-between align-items-center flex-wrap">
      <div class="header-content">
        <h1 class="page-title mb-1">{% block page_title %}Dashboard{% endblock %}</h1>
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a href="#">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">{% block breadcrumb %}Dashboard{% endblock %}</li>
          </ol>
        </nav>
      </div>
      <div class="header-actions mt-3 mt-md-0">
        <div class="quick-stats d-flex gap-3">
          <div class="stat-item d-flex align-items-center">
            <i class="fas fa-clock me-2"></i>
            <span id="currentTime">--:--</span>
          </div>
          <div class="stat-item d-flex align-items-center">
            <i class="fas fa-calendar-alt me-2"></i>
            <span id="currentDate">--/--/----</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Welcome Section -->
    <div class="dashboard-welcome my-4">
      <h2>ðŸ‘‹ Welcome, {{ user.first_name|default:user.username }}!</h2>
      <p>Youâ€™re on the <strong>{{ user.user_type|title }} Dashboard</strong>. Ready to boost your career today?</p>

      <div class="dashboard-highlights mt-4 d-grid gap-4 grid-template-columns-3">
        <div class="highlight-box text-center">
          <i class="fas fa-rocket fa-2x mb-2"></i>
          <h4>Start Aptitude Test</h4>
          <p>Begin your journey with real-time logic and reasoning questions.</p>
        </div>
        <div class="highlight-box text-center">
          <i class="fas fa-microchip fa-2x mb-2"></i>
          <h4>Technical Round</h4>
          <p>MCQ + Coding challenges tailored to your domain.</p>
        </div>
        <div class="highlight-box text-center">
          <i class="fas fa-users fa-2x mb-2"></i>
          <h4>Group Discussion</h4>
          <p>Practice effective communication and leadership.</p>
        </div>
      </div>
    </div>

    <!-- Dynamic Page Content -->
    <div class="content-area mt-4">
      {% block page_content %}{% endblock %}
    </div>
  </div>
</div>


<!-- Mobile Sidebar Toggle -->
<button class="mobile-menu-toggle d-lg-none" id="mobileMenuToggle">
  <i class="fas fa-bars"></i>
</button>

<!-- Mobile Overlay -->
<div class="overlay d-lg-none" id="overlay"></div>

<!-- Loading Spinner -->
<div class="loading-spinner" id="loadingSpinner">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>
{% endblock %}

{% block scripts %}
<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'dashboard/js/dashboard.js' %}"></script>
{% endblock %}